<!-- Time-stamp: <2021-10-29 13:13:05 stefan> -*-web-*- -->
<!-- https://www.educba.com/bootstrap-sort-table/
     här använder jag metod 1 för att sortera tabellen

     tabellen sorteras mha funktioner i jQuery

     bootstrap 5.1 används
-->

@using System
@using System.Collections.Generic
@using System.Linq

@using Kartotek.Modeller.Vyer
@using Kartotek.Modeller.Entiteter

@model Kartotek.Modeller.Vyer.HopslagenmodellVymodell

@{
    ViewData["Title"] = "Ett personkartotek";
}

<div class="text-center">
    <h3 class="display-4">Ett kartotek över aktiva medlemmar</h3>
    <div>
	<partial name="filtrering" for="Filtertermer" />
	<hr>
	<!-- funktion för inläggning av en person i taget  -->
	<partial name="nya_aktiva" for="NyttKort"/>
	<hr>
	<!-- via ajax se och förändra en databas  -->
	<partial name="ajaxbaserad_kortselektor"/>
	<hr>
	<partial name="aktivlistan" for="Personlistan"/>
    </div>
</div>


@section Scripts {
    <!-- https://stackoverflow.com/questions/7556400/injecting-content-into-specific-sections-from-a-partial-view-asp-net-mvc-3-with -->
    <!-- varför kan man inte inkludera script via script:sektionen direkt inuti en partial view. -->
    <!-- Därför att asp.net (mer specifikt Razor) fungerar så. -->

    <script type="text/javascript" src="~/js/site.js"></script>
    <script type="text/javascript" src="~/js/sorteratabell.js"></script>
    <script type="text/javascript" src="~/lib/jquery-validate/jquery.validate.js"></script>
    <script type="text/javascript" src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>

    <script type="text/javascript">
     $(document).ready(function () {
	 $('#nya_aktiva').validate( {
	     debug: false,
	     onkeyup: true,
	     rules: {
	     }
	 })
     });
    </script>

    <script type="text/javascript">
     $(document).ready(function() {
	 const url = "http://localhost:5006/PeopleAjax/uppdateralistan";

	 $('#uppdateralistan').click(function( event) {
	     $('#kortvy').append( "2test");
	     event.preventDefault();

	     @*
		req.onreadystatechange = function() {
		if (this.readyState==XMLHttpRequest.DONE &&
		this.status==200) {
		document.getElementsById('kortvy').innerHTML = "test;"
		}
		}
		req.open( "GET", url);
		req.send();
		let req = new XMLHttpRequest();
	      *@

	 });
     });
    </script>

    <script type="text/javascript">
     $(document).ready(function () {
	 $('#specifiktKort').validate( {
	     debug: false,
	     onkeyup: true,
	     rules: {
	     }
	 });
     });
    </script>

    <script type="text/javascript">
     $(document).ready(function () {
	 $('#personindex').DataTable({
	     "ordering": true, // false to disable sorting (or any other option)
	     "paging": false,
	     "columns": [{ "searchable": true },
			 { "searchable": true },
			 { "searchable": true },
			 { "searchable": false },
			 {
			     "searchable": false,
			     "orderable": false
			 }
	     ]
	 });
	 $('.dataTables_length').addClass('bs-select');
     });
    </script>
    }
